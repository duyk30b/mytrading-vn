<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="" />
		<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors" />
		<meta name="generator" content="Hugo 0.80.0" />
		<title>My Webhook 1.0</title>

		<!-- Bootstrap core CSS -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
		<link href="/css/dashboard.css" rel="stylesheet" />

		<script src="socket.io/socket.io.js"></script>
		<script>
			let socket = io(location.origin);
			socket.on('<%= emitSend %>', function (data) {
				alert('Have a new Alert from Tradingview');
				document.getElementById('content').innerHTML += `<tr>
                            <td>${data.time}</td>
                            <td>${data.exchange}</td>
                            <td>${data.ticker}</td>
                            <td>${data.bar.time}</td>
                            <td>${data.bar.open}</td>
                            <td>${data.bar.high}</td>
                            <td>${data.bar.low}</td>
                            <td>${data.bar.close}</td>
                            <td>${data.bar.volume}</td>
							</tr>`;
			});
		</script>
	</head>
	<body>
		<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
			<a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="/">My Webhook 1.0</a>
			<button
				class="navbar-toggler position-absolute d-md-none collapsed"
				type="button"
				data-toggle="collapse"
				data-target="#sidebarMenu"
				aria-controls="sidebarMenu"
				aria-expanded="false"
				aria-label="Toggle navigation"
			>
				<span class="navbar-toggler-icon"></span>
			</button>
		</nav>

		<div class="container-fluid">
			<div class="row">
				<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
					<div class="sidebar-sticky pt-3"></div>
				</nav>

				<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
					<h5 class="mb-3 mt-3" id="linkWebhook">Link Webhook: </h5>
					<script>
						document.getElementById('linkWebhook').innerHTML += `<a href="${location.href}"> ${location.href} </a>`;
					</script>
					<div class="table-responsive">
						<table class="table table-striped table-sm">
							<thead>
								<tr>
									<th>TimeNow</th>
									<th>Exchange</th>
									<th>Ticker</th>
									<th>Time</th>
									<th>Open</th>
									<th>High</th>
									<th>Low</th>
									<th>Close</th>
									<th>Volume</th>
								</tr>
							</thead>
							<tbody id="content"></tbody>
						</table>
					</div>
				</main>
			</div>
		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
		<script src="/js/dashboard.js"></script>
	</body>
</html>
